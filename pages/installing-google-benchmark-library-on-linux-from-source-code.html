<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Installing Google 'Benchmark' library on Linux from source code</title>
</head>
<body style="font-family: Tahoma,Geneva,sans-serif;">

    <h1 style="text-align: center;"><strong>Installing Google 'Benchmark' library on Linux from source code</strong></h1>
    <p><br></p>
    <p>In this tutorial we will look at how to compile and install Google's benchmark library on Linux system from source code.</p>
    <p><br></p>

    <p><strong><span style="font-size: 18px;">Step 1 : Downloading source code</strong></p>
    <p>This can be done in two ways.</p>
    <p>1. Directly download the zip file containing source code of library from web URL:</p>
    <p style="margin-left: 20px;">
        &nbsp;
            <a href="https://github.com/google/benchmark/archive/master.zip" rel="noopener noreferrer" target="_blank">https://github.com/google/benchmark/archive/master.zip</a>&nbsp;
        
    </p>
    <p>2. Clone the repository with your preferred Git/SVN client using repositories web URL:</p>
    <p style="margin-left: 20px;">
        &nbsp;
            <a href="https://github.com/google/benchmark.git" rel="noopener noreferrer" target="_blank">https://github.com/google/benchmark.git</a>&nbsp;
        
    </p>
    <p>I prefer downloading zip, as currently I am not contributing in development of library and just want to try it out for my projects.</p>
    <p style="text-align: left; margin-left: 20px;">
        <img src="../images/google_benchmark/Google_Benchmark_GitHub_Page.png" alt="Google_Benchmark_GitHub_Page" class="inline">
    </p>
    <p><br></p>
    <p><strong><span style="font-size: 18px;">Step 2 : Building / Compiling source code</strong></p>
    <p>After zip is downloaded, we have to extract it using unzip command.</p>
    <pre><span style="font-size: 14px; background-color: rgb(239, 239, 239);"><strong>unzip benchmark-master.zip</strong></pre>
    <p>This will create benchmark-master directory containing actual source code of library. Goto benchmark-master directory using following command:</p>
    <pre><strong><span style="font-size: 14px; background-color: rgb(239, 239, 239);">cd benchmark-master</strong></pre>
    <p>'benchmark' library uses CMake to manage its build process, so before starting build we first must generate <strong>Makefile</strong> using <strong>cmake</strong>. Following are the commands to generate a <strong>Makefile</strong>.</p>
    <pre><span style="font-size: 14px; background-color: rgb(239, 239, 239);"><strong>mkdir build
cd build
cmake .. -DCMAKE_BUILD_TYPE=Release -DCMAKE_INSTALL_PREFIX=/opt/toolchain/google_benchmark_v1.1.0</strong></pre>
    <p>Above commands create a build directory (you can give it any name you want) in benchmark-master directory which contain the source code. Goto build directory and execute <strong>cmake</strong> command with given options.</p>
    <p>In the last command "<strong>.."&nbsp;</strong>is the path to source code root folder (in this case the parent folder).</p>
    <p><strong>-DCMAKE_BUILD_TYPE</strong> is set to Release as our intention is to consume the library and not to debug it.</p>
    <p><strong>-DCMAKE_INSTALL_PREFIX</strong> option is custom install directory where our generated library will be installed. Without this option it will install into default system directories.</p>
    <p><br></p>
    <p>I prefer using specific install directory so that I can use/try multiple versions of library without disturbing existing system setup. Also uninstalling is as simple as deleting the directory.</p>
    <p>After successful execution of above commands, <strong>Makefile</strong> is generated in current directory (i.e. inside build directory).</p>
    <p>Now use make command to start compiling source code and generate the library</p>
    <pre><span style="font-size: 14px; background-color: rgb(239, 239, 239);"><strong>make</strong></pre>
    <p><br></p>

    <p><strong><span style="font-size: 18px;">Step 3 : Installing generated library</strong></p>
    <p>After compilation is successful, installing the library is very simple. Just give following command:</p>
    <pre><span style="font-size: 14px; background-color: rgb(239, 239, 239);"><strong>sudo make install</strong></pre>
    <p>This will simply copy the generated library and required file to given installation location.</p>
    <p><br></p>

    <p><strong><span style="font-size: 18px;">Step 4 : Cleanup</strong></p>
    <p>Finally, we have to delete the build folder as it is no longer needed. Fire following commands on terminal:</p>
    <pre><span style="font-size: 14px; background-color: rgb(239, 239, 239);"><strong>cd ..
rm -rf build</strong></pre>
    <p><br></p>
    <p>We have completed installation part of library. In next tutorial we will look into how to use it to benchmark programs.</p>

</body>
</html>
